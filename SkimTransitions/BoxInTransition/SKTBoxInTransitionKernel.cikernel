kernel vec4 boxInTransition(sampler src, sampler trgt, vec4 extent, vec2 center, float t)
{
    vec2 t1, r1, r2;
    float d1;
    
    t1 = destCoord();
    
    r1 = t * center + (1.0 - t) * extent.xy;
    r2 = t * center + (1.0 - t) * (extent.xy + extent.zw);
    
    d1 = step(r1.x, t1.x) * step(t1.x, r2.x) * step(r1.y, t1.y) * step(t1.y, r2.y);
    
    return d1 < 0.5 ? sample(trgt, samplerCoord(trgt)) : sample(src, samplerCoord(src));
}
